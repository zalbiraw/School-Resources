	AREA prog1, code, READONLY
	ENTRY
	ADR R0, STRING1 ; POINT R0 TO THE INPUT STRING
	ADR R1, STRING2 ; POINT R1 TO THE OUTPUT STRING
	MOV R3, #0 ; FLAG FOR IF THE FIRST WORD IS THE
	MOV R7, #0 ; R7 IS AN OFFSET USED TO SEARCH THROUGH WORDS
LOOP CMP R6,#0x00 ; IF THE LAST WORD IS THE
	ADDEQ R0,R12 ; SKIP OVER THE
	STRBEQ R2,[R1],R7 ; PUSH END OF STRING TO THE OUTPUT STRING
	MOV R6, #1 ; RESETING R6 TO ENSURE IT IS NOT 0x00
	LDRB R2,[R0],#1 ; NEXT BYTE IN THE STRING LOADED INTO R2
	CMP R2,#0x00 ; IF THE ELEMENT IS END OF STRING
	STRBEQ R2,[R1],#1 ; PUSH END OF STRING TO THE OUTPUT STRING
	BEQ DONE ; FINISHED LOOP
	CMP R2,#0x74 ; CHECK FOR IF THE FIRST WORD IS THE
	CMPEQ R3,#0 ; CHECK R3 FLAG - 0 = FIRST WORD, 1 = NOT FIRST
	MOVEQ R12,#2 ; OFFSET FOR SKIPPING THE
	MOVEQ R3,#1 ; SET R3 FLAG
	MOVEQ R7,#0 ; OFFSET FOR SEARCHING FOR WORDS
	BEQ H ; BRANCH TO THE H
	CMP R2,#0x20 ; CHECK FOR SPACE
	MOVEQ R7,#1 ; INCREASE SEARCH OFFSET
	MOVEQ R12,#3 ; SET SKIPPING OFFSET TO SKIP 1 MORE
	LDRBEQ R3,[R0] ; LOAD THE NEXT CHARCTER INTO R3
	CMPEQ R3,#0x74 ; CHECK IF IT IS t
H	LDRBEQ R4,[R0,R7] ; LOAD NEXT CHARACTER INTO R4
	ADDEQ R8,R7,#1 ; INCREASE SEARCH OFFSET AND STORE IT INTO R8 TO PRESERVE R7
	CMPEQ R4,#0x68 ; CHECK IF IT h
	LDRBEQ R5,[R0,R8] ; LOAD NEXT CHARACTER INTO R5
	ADDEQ R8,#1; INCREASE SEARCH OFFSET AND STORE INTO R8
	CMPEQ R5,#0x65 ; CHECK IF IT IS e
	LDRBEQ R6,[R0,R8] ; LOAD NEXT CHARACTER INTO R6
	CMPEQ R6,#0x20 ; CHECK IF IT IS A SPACE
	STRBEQ R2,[R1],R7 ; IF IT IS PUSH TO OUTPUT STRING 
	ADDEQ R0,R12 ; SKIP OVER THE
	CMPNES R6,#0x00 ; CHECK IF IT IS A THE AT THE END OF THE STRING 
	BEQ LOOP ; IF IT IS GO TO THE BEGINNING
	STRB R2,[R1],#1 ; PUSH THE NEW CHARACTER INTO THE RESULT STRING
	B LOOP ; REPEAT UNTIL THE WHOLE STRING HAS BEEN COPIED
DONE B DONE ; PROGRAM FINSIHED
STRING1 DCB "and the man said they must go" ;String1
EoS DCB 0x00 ;end of string1
STRING2 space 0xFF ;just allocating 255 bytes 
	END